generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Core product model migrated from Mongo Product schema
model Product {
  id                 String            @id @default(cuid())
  sku                String            @unique
  name               String
  category           String
  description        String
  technicalDescription String
  coding             ConnectorCoding
  pins               Int
  ipRating           IPRating
  gender             ConnectorGender
  connectorType      ConnectorType
  material           String
  voltage            String
  current            String
  temperatureRange   String
  wireGauge          String?
  cableLength        String?
  price              Float?
  priceType          PriceType         @default(quote)
  inStock            Boolean           @default(true)
  stockQuantity      Int?
  images             String[]
  datasheetUrl       String?
  createdAt          DateTime          @default(now())
  updatedAt          DateTime          @updatedAt
}

model User {
  id        String   @id @default(cuid())
  name      String
  email     String   @unique
  password  String
  company   String?
  phone     String?
  role      String   @default("customer")
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Admin {
  id        String   @id @default(cuid())
  username  String   @unique
  password  String
  role      String   @default("admin")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Order {
  id             String        @id @default(cuid())
  companyName    String
  contactName    String
  email          String
  phone          String
  companyAddress String?
  items          OrderItem[]
  notes          String?
  status         OrderStatus   @default(pending)
  createdAt      DateTime      @default(now())
  updatedAt      DateTime      @updatedAt
}

model Category {
  id          String   @id @default(cuid())
  name        String
  slug        String   @unique
  description String?
  image       String?
  parentId    String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model OrderItem {
  id        String  @id @default(cuid())
  order     Order   @relation(fields: [orderId], references: [id], onDelete: Cascade)
  orderId   String
  productId String
  sku       String
  name      String
  quantity  Int
  notes     String?
}

model Inquiry {
  id        String   @id @default(cuid())
  name      String
  email     String
  phone     String?
  company   String?
  subject   String
  message   String
  read      Boolean  @default(false)
  responded Boolean  @default(false)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Resource {
  id          String   @id @default(cuid())
  title       String
  type        String
  description String
  url         String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Blog {
  id          String   @id @default(cuid())
  title       String
  excerpt     String
  content     String
  author      String
  category    String
  image       String?
  published   Boolean  @default(false)
  publishedAt DateTime?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Career {
  id             String   @id @default(cuid())
  title          String
  department     String
  location       String
  type           String
  description    String
  requirements   String?
  responsibilities String?
  benefits       String?
  salary         String?
  active         Boolean  @default(true)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model ContactInfo {
  id               String          @id @default(cuid())
  phone            String
  email            String
  address          String
  registeredAddress String?
  factoryLocation2 String?
  regionalBangalore String?
  regionalKolkata   String?
  regionalGurgaon   String?
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
}

model Idempotency {
  id         String   @id @default(cuid())
  key        String   @unique
  response   Json
  statusCode Int
  createdAt  DateTime @default(now())
  expiresAt  DateTime
}

enum OrderStatus {
  pending
  quoted
  approved
  rejected
}

enum ConnectorCoding {
  A
  B
  D
  X
}

enum IPRating {
  IP67
  IP68
  IP20
}

enum ConnectorGender {
  Male
  Female
}

enum ConnectorType {
  M12
  M8
  RJ45
}

enum PriceType {
  fixed
  quote
}

